<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>创始人</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />

		<link rel="stylesheet" href="../css/mui.min.css" />
		<link rel="stylesheet" href="../css/mui.indexedlist.css" />
		<link rel="stylesheet" href="../css/app.css" />
		<style>
			html,
			body {
				height: 100%;
				overflow: hidden;
			}
			.mui-scroll-wrapper {
				position: absolute;
				z-index: 1;
				top: 35px;
			}
            .user-name {
				color: #C15151;
				font-size: 15px;
			}
			.user-avatar {
				border-radius: 50%;
				width: 40px;
				float: left;
			}
		</style>
	</head>

	<body>
        <div class="mui-content" style="padding: 0px 5px;">
			<div class="mui-segmented-control c-control">
				<a id="contact-book" class="mui-control-item mui-active" href="#contact-book-item">通讯录</a>
				<a id="chat-history" class="mui-control-item" href="#chat-history-item">聊天</a>
			</div>
		</div>
		<div class="mui-content">
			<div class="mui-scroll-wrapper">
				<div id="contact-book-item" class="mui-control-content mui-active">
					<!-- start -->
					<div id='list' class="mui-indexed-list">
						<div class="mui-indexed-list-search mui-input-row mui-search">
							<input type="search" class="mui-input-clear mui-indexed-list-search-input" placeholder="搜索">
						</div>
						<div class="mui-indexed-list-bar">
							<a>A</a>
							<a>B</a>
							<a>C</a>
							<a>D</a>
							<a>E</a>
							<a>F</a>
							<a>G</a>
							<a>H</a>
							<a>I</a>
							<a>J</a>
							<a>K</a>
							<a>L</a>
							<a>M</a>
							<a>N</a>
							<a>O</a>
							<a>P</a>
							<a>Q</a>
							<a>R</a>
							<a>S</a>
							<a>T</a>
							<a>U</a>
							<a>V</a>
							<a>W</a>
							<a>X</a>
							<a>Y</a>
							<a>Z</a>
						</div>
						<div class="mui-indexed-list-alert"></div>
						<div class="mui-indexed-list-inner">
							<div class="mui-indexed-list-empty-alert">没有数据</div>
							<ul id="friend-list" class="mui-table-view">
								<li data-group="A" class="mui-table-view-divider mui-indexed-list-group">A</li>
								<li data-value="AKU" data-tags="AKeSu" class="mui-table-view-cell mui-indexed-list-item">阿克苏机场</li>
								<li data-value="BPL" data-tags="ALaShanKou" class="mui-table-view-cell mui-indexed-list-item">阿拉山口机场</li>
								<li data-value="AAT" data-tags="ALeTai" class="mui-table-view-cell mui-indexed-list-item">阿勒泰机场</li>
								<li data-value="NGQ" data-tags="ALiKunSha" class="mui-table-view-cell mui-indexed-list-item">阿里昆莎机场</li>
								<li data-value="AQG" data-tags="AnQingTianZhuShan" class="mui-table-view-cell mui-indexed-list-item">安庆天柱山机场</li>
								<li data-value="MFM" data-tags="AoMenGuoJi" class="mui-table-view-cell mui-indexed-list-item">澳门国际机场</li>
								<li data-group="B" class="mui-table-view-divider mui-indexed-list-group">B</li>
								<li data-value="BSD" data-tags="BaoShan" class="mui-table-view-cell mui-indexed-list-item">保山机场</li>
								<li data-value="BAV" data-tags="BaoTou" class="mui-table-view-cell mui-indexed-list-item">包头机场</li>
								<li data-value="BHY" data-tags="BeiHaiFuCheng" class="mui-table-view-cell mui-indexed-list-item">北海福成机场</li>
								<li data-value="NAY" data-tags="BeiJingNanYuan" class="mui-table-view-cell mui-indexed-list-item">北京南苑机场</li>
								<li data-value="PEK" data-tags="BeiJingShouDuGuoJi" class="mui-table-view-cell mui-indexed-list-item">北京首都国际机场</li>
							</ul>
						</div>
					</div>
					<!-- end -->
				</div>
                <div id="chat-history-item" class="mui-control-content">
					<ul id="content-list" class="mui-table-view mui-table-view-chevron">
						<li id="im_id" class="mui-table-view-cell mui-media">
							<a class='mui-navigate-right' href="chat.html?id=1" data-guid="1">
								<img class="mui-media-object mui-pull-left user-avatar" src="../images/blank.jpg">
								<div class="mui-media-body">
									<span class="user-name">王少天</span>
									<p class="mui-ellipsis-2">12345679798</p>
								</div>
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript" charset="UTF-8" src="../js/mui.min.js"></script>
	<script type="text/javascript" charset="UTF-8" src="../js/app.js"></script>
	<script type="text/javascript" charset="UTF-8" src="../js/mui.indexedlist.js"></script>
	<script>
		mui.init();
		mui.ready(function() {

			var friendListEl = document.getElementById("friend-list");
			var success = function(response) {
				var friends = response.body.list;
				console.log("friends : " + JSON.stringify(friends));
				var groupList = ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];
				var friendsHtml = "";
				for (var i = 0, len = groupList.length; i < len; i++) {
					var groupElements = friends[groupList[i]];
					console.log(groupList[i] + " : " + JSON.stringify(groupElements));
				}
				//friendListEl.appendChild();
			},
			error = function(errorType) {
				mui.toast(app.ajaxErrorHandler(errorType));
			};

			document.addEventListener('mui.view.beforeshow', function(event) {
				app.listFriends(success, error);
			});

			var list = document.getElementById('list');
			//calc hieght
			list.style.height = (document.body.offsetHeight - 30) + 'px';
			//create
			window.indexedList = new mui.IndexedList(list);
		});

		mui('.mui-table-view').on('tap', 'li', function() {
			open_chat(this.getAttribute('data-guid'));
		});

		var chatWebview = null;
		function open_chat(id) {
			if (!chatWebview) {
				chatWebview = plus.webview.getWebviewById('im-chat');
			}
			mui.fire(chatWebview, 'mui.view.beforeshow', {
				guid: id
			});
		};
	</script>

</html>